<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Aeolus</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:300italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="pure-min.css">
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  </head>
  <body>
    <div class="pure-g background">
      <div class="pure-u-1-5"></div>
      <div class="pure-u-3-5">
        <div class="claim">
          parawind
        </div>
        <div class="claim-small">
          Subscribe and get notified when the wind looks good tomorrow
        </div>
        <div id="map"></div>
        <form action="http://parawind.us12.list-manage.com/subscribe/post?u=2dce060824ff8f04a3bc42c73&amp;id=6709713fd7" target="_blank" method="post" class="pure-form pure-form-aligned">
          <fieldset>
            <input name="LOCATION" id="location" type="hidden">
            <div class="pure-control-group">
              <label>Max. Wind Speed (km/h)</label>
              <input name="WIND_MAX" class="max-wind" type="text" placeholder="e.g. 20">
            </div>
            <div class="pure-control-group">
              <label>Wind Direction (Â°)</label>
              <input name="WIND_FROM" id="wind-from" class="number-input" type="text" placeholder="e.g. 180">
              to
              <input name="WIND_TO" id="wind-to" class="number-input" type="text" placeholder="e.g. 350">
              <canvas id="windDirection" width="100" height="100" />
            </div>
  </body>
            <div class="pure-control-group">
              <label>Email Address</label>
              <input name="EMAIL" class="email" type="text" placeholder="email@example.com">
            </div>
            <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_2dce060824ff8f04a3bc42c73_6709713fd7" tabindex="-1" value=""></div>
            <div class="pure-controls">
              <button type="submit" class="pure-button subscribe">Notify me!</button>
            </div>
          </fieldset>
        </form>
      </div>
      <div class="pure-u-1-5"></div>
    </div>
    <script type="text/javascript" charset="utf-8">
      document.getElementById("wind-from").addEventListener("keyup", updateWindDirection);
      document.getElementById("wind-to").addEventListener("keyup", updateWindDirection);

      function updateWindDirection() {
        var radius=30
        var from = document.getElementById("wind-from").value;
        var to = document.getElementById("wind-to").value;
        var canvas = document.getElementById("windDirection");
        var ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.beginPath();
        ctx.fillStyle = '#64b3f4';
        ctx.moveTo(radius, radius);
        ctx.arc(radius,radius,radius,(from-90)*(Math.PI/180),(to-90)*(Math.PI/180));
        ctx.fill();
      }
    </script>
    <script type="text/javascript" charset="utf-8">
var map = L.map('map').setView([48.06534,8.01349], 13);
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);

var marker = L.marker([51.5, -0.09]).addTo(map);

map.on('click', function(e) {
  document.getElementById('location').value = e.latlng.lat + ', ' + e.latlng.lng;
  marker.setLatLng(e.latlng);
});
    </script>
  </body>
</html>
